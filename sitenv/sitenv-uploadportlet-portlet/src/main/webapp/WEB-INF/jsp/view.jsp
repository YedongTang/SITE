      <%@ taglib uri="http://java.sun.com/portlet_2_0" prefix="portlet"%>      <%@ taglib uri="http://liferay.com/tld/aui" prefix="aui"%>      <%@ taglib uri="http://liferay.com/tld/ui" prefix="liferay-ui"%>      <%@ page import="com.liferay.portal.kernel.util.ParamUtil"%>      <%@ page import="com.liferay.portal.kernel.util.Validator"%>      <%@ page import="com.liferay.portlet.PortletPreferencesFactoryUtil" %>      <%@ page import="javax.portlet.PortletPreferences"%>      <%@ page import="com.liferay.util.PwdGenerator"%>      <%@ page import="com.liferay.portal.service.PortletPreferencesLocalServiceUtil" %>      <%@ page import="com.liferay.portal.kernel.util.WebKeys" %>      <%@page import="com.liferay.portal.kernel.portlet.LiferayWindowState"%>            <portlet:actionURL var="urlAction" windowState="<%= LiferayWindowState.EXCLUSIVE.toString() %>">    	<portlet:param name="javax.portlet.action" value="uploadCCDA"/>	  </portlet:actionURL>	  	  <portlet:actionURL var="smartCCDAAction" windowState="<%= LiferayWindowState.EXCLUSIVE.toString() %>">    	<portlet:param name="javax.portlet.action" value="smartCCDA"/>	  </portlet:actionURL>      	  	  <portlet:resourceURL id="saveAsPDF"  var="downloadCCDAAction">    	</portlet:resourceURL>            <portlet:defineObjects />      <%--      	  String uploadProgressId = PwdGenerator.getPassword(PwdGenerator.KEY3, 4);          PortletPreferences prefs = renderRequest.getPreferences();                    String portletResource = ParamUtil.getString(request, "portletResource");          prefs = PortletPreferencesFactoryUtil.getPortletSetup(request, portletResource);                    /*          String portletName = Portletconfig.getPortletName();          Portlet portlet = PortletLocalServiceUtil.getPortletById(portletName);          long companyId = portlet.getCompanyId();          PortletPreferences defaultPreferencesMap = PortletPreferencesLocalServiceUtil.getDefaultPreferences(companyId, portletName);          */                    String portletInstanceId = (String) renderRequest.getAttribute(WebKeys.PORTLET_ID);          prefs = PortletPreferencesFactoryUtil.getPortletSetup(request, portletInstanceId);                	  String javaScriptNamespace = prefs.getValue("JsNs", null);      	        	  String serviceContext =       			 	request.getScheme() + "://" + request.getServerName() +  				  	":" + request.getServerPort() + "/delegate";      	        	  //String ccdaloadserviceUrl = serviceContext + prefs.getValue("CcdaUploadServiceUrl", null);      	  String ccdaloadserviceUrl = prefs.getValue("CcdaUploadServiceUrl", null);      	        	  //String resultsaveasserviceUrl = serviceContext + prefs.getValue("ResultSaveAsServiceUrl", null);      	  String resultsaveasserviceUrl = prefs.getValue("ResultSaveAsServiceUrl", null);      	   		  //String smartccdaservicerelayUrl = serviceContext + prefs.getValue("SmartCCDAServiceUrl", null);		  String smartccdaservicerelayUrl = prefs.getValue("SmartCCDAServiceUrl", null);		  		 String smartccdaremoteserviceUrl = prefs.getValue("SmartCCDARemoteServiceUrl", null);		 		 String smartccdaremoterubricUrl = prefs.getValue("SmartCCDARemoteRubricsUrl", null);		        --%>                      <portlet:actionURL var="editCaseURL" name="uploadFile">          <portlet:param name="jspPage" value="/Upload.jsp" />      </portlet:actionURL>            <liferay-ui:success key="success" message="CCD upload completed!" />            <liferay-ui:error key="error" message="CCD contains error(s)." />      <!--      <%--liferay-ui:upload-progress id="<%= uploadProgressId %>" message="uploading" redirect="<%= editCaseURL %>"/ --%>            <portlet:resourceURL var="ajaxResourceUrl"/>      -->      <script type="text/javascript">		      	window.currentContextPath = "<%=request.getContextPath()%>";			</script>                   	<!-- method="POST" action="<%= editCaseURL %>" -->      	<!--form id="CCDAValidationForm" enctype="multipart/form-data" relay="<%--=smartccdaservicerelayUrl --%>" action="<%--= ccdaloadserviceUrl --%>" -->      	<form id="CCDAValidationForm" action="${urlAction}" method="POST" relay="<%= smartCCDAAction %>" enctype="multipart/form-data">      		<h3><b>Please select one of the document type below. (validation may take up to one minute to run)</b></h3>      		<div id="ccda_type_radioboxgroup">      					  <input type="radio" id="ccda1" name="ccda_type_val" value="ClinicalOfficeVisitSummary"/>			  <label for="ccda1"  class="ui-widget-content">Clinical Office Visit Summary - MU2 170.314(e)(2) - Clinical Summary</label>			  			  <input type="radio" id="ccda2" name="ccda_type_val" value="TransitionsOfCareAmbulatorySummary" />			  <label for="ccda2"  class="ui-widget-content">Transitions Of Care Ambulatory Summary - MU2 170.314(b)(2) Transition of Care/Referral Summary - For Ambulatory Care</label>			  			  <input type="radio" id="ccda3" name="ccda_type_val" value="TransitionsOfCareAmbulatorySummary" />			  <label for="ccda3"  class="ui-widget-content">Transitions Of Care Ambulatory Summary - MU2 170.314(b)(7) Data Portability - For Ambulatory Care</label>			  			  <input type="radio" id="ccda4" name="ccda_type_val" value="TransitionsOfCareAmbulatorySummary" />			  <label for="ccda4"  class="ui-widget-content">Transitions Of Care Ambulatory Summary - MU2 170.314(b)(1) Transition of Care Receive - For Ambulatory Care</label>			  			  <input type="radio" id="ccda5" name="ccda_type_val" value="TransitionsOfCareInpatientSummary" />			  <label for="ccda5"  class="ui-widget-content">Transitions Of Care Inpatient Summary - MU2 170.314(b)(2) Transition of Care/Referral Summary - For Inpatient Care</label>			  			  <input type="radio" id="ccda6" name="ccda_type_val" value="TransitionsOfCareInpatientSummary" />			  <label for="ccda6"  class="ui-widget-content">Transitions Of Care Inpatient Summary - MU2 170.314(b)(7) Data Portability - For Inpatient Care</label>			  			  <input type="radio" id="ccda7" name="ccda_type_val" value="TransitionsOfCareInpatientSummary" />			  <label for="ccda7"  class="ui-widget-content">Transitions Of Care Inpatient Summary - MU2 170.314(b)(1) Transition of Care Receive - For Inpatient Care</label>			  			  <input type="radio" id="ccda8" name="ccda_type_val" value="VDTAmbulatorySummary" />			  <label for="ccda8"  class="ui-widget-content">VDT Ambulatory Summary - MU2 170.314 (e)(1) Ambulatory Summary</label>			  			  <input type="radio" id="ccda9" name="ccda_type_val" value="VDTInpatientSummary" />			  <label for="ccda9"  class="ui-widget-content">VDT Inpatient Summary - MU2 170.314 (e)(1) Inpatient Summary</label>			  			  <input type="radio" id="ccda10" name="ccda_type_val" value="ClinicalOfficeVisitSummary" />			  <label for="ccda10"  class="ui-widget-content">Non-specific CCDA</label>			</div>			<input type="hidden" name="smart_ccda_url" value="<%--=smartccdaremoteserviceUrl --%>">			<input type="hidden" name="smart_ccda_rubrics_url" value="<%--=smartccdaremoterubricUrl --%>">						<!-- <input type="file" name="upload_ccda" id="ccdafileChooser" onChange="fileSelected()" />			<hr/>			<div class="fileinputs">				<input type="file" name="upload_ccda" id="ccdafileChooser" onChange="fileSelected()" class="file" />				<div class="fakefile">					<input />					<img />				</div>			</div> -->						<!-- The fileinput-button span is used to style the file input field as button -->			<br/>			<noscript><input type="hidden" name="redirect" value="true" /></noscript>			<table>				<tr>					<td><span class="btn btn-success fileinput-button"> <i							class="glyphicon glyphicon-plus"></i>&nbsp;<span>Select a C-CDA File...</span>							<!-- The file input field used as target for the file upload widget -->							<input id="fileupload" type="file" name="file" />					</span>						</td>					<td>						<div id="files" class="files"></div>					</td>					<td>						<div id="progress" class="progress">							<div class="progress-bar progress-bar-success"></div>						</div>					</td>				</tr>			</table>			<br/>			<button id="formSubmit" type="submit" class="btn btn-primary start" onclick="return false;">							<i class="glyphicon glyphicon-ok"></i> <span>Validate Document</span>						</button>						      	</form>      		<script type="text/javascript">		var url = '${urlAction}';	</script>      	      	      	      	<div id="ValidationResult" style="display:none">      		<div id="tabs">			  <ul>			    <li><a href="#tabs-1">Validation Result</a></li>			    <li><a href="#tabs-2">Original CCDA</a></li>			    <li><a href="#tabs-3">Smart CCDA Result</a></li>			  </ul>			  <div id="tabs-1">			    <h2>Content heading 1</h2>			  </div>			  <div id="tabs-2">			    <h2>Place holder</h2>			    <p>Under construction.</p>			  </div>			  <div id="tabs-3">			  </div>			</div>      	</div>      	      	<div id="reportSaveAsQuestion" style="display:none; cursor: default">      		<form id="downloadtest" action="<%= downloadCCDAAction %>" method="POST">      		<textarea id="reportContent" name="reportContent" style="display:none;">      		</textarea>			<br>	    	<fieldset>				<legend><b>Save your report as:</b></legend>					<div>					<div class="radio">					<input type="radio" id="single" name="marital_status" checked value="single" style="border:3px solid green">					</div>					<label for="single">PDF</label>				</div>								<div>					<div class="radio">					<input type="radio" id="married" name="marital_status" value="married" disabled>					</div>					<label for="married">HTML</label>				</div>								<div>					<div class="radio">					<input type="radio" id="married" name="marital_status" value="married" disabled>					</div>					<label for="married">TXT</label>				</div>				</fieldset>	        <button id="yes">OK</button>	        <button id="no">Cancel</button>	        </form>       	</div>      	      	      <portlet:renderURL var="viewCaseURL">          <portlet:param name="jspPage" value="/view2.jsp" />      </portlet:renderURL>            